tosca_definitions_version: tosca_simple_yaml_1_3
description: A TOSCA template to implement migration of cloud based app server software from cloud to specific MEC DCs. First used as part of 5G Riders on the Storm 2020 Catalyst for TMForum for hosting WheresMyChargePoint

metadata:
  # The following fields are "normative" and expected in TOSCA 
  template_name: AssuredHosting
  template_author: paul.m.jordan@bt.com
  template_version: '1.1'

imports:
  # - file: https://github.com/pmjordan/TOSCA_for_TMForum/blob/master/sid.yml
  # would normally refer to external repository but for now make it local
  - file: ../../../../TOSCA_for_TMForum/sid.yml
  # The content is a TOSCA encoding of selected SID information model entities as explained in IG1176
    namespace_prefix: sid

topology_template:
  
  node_templates:
    mec:

    app:
      type: #as this is a classic VNF we have a choice of how to model it. Could be based on TOSCA node types, SID software entities or ETSI VNFs. Depends on what is easiest for the orchestrator vendor.
      name: WheresMyChargePoint
    requires: # at least one cloud service provider

  # cloud provider for app server, may be more than one
    # each will have credentials
    # credentials supplied at order time

  # mec host for app server, may be several
  
  interface on mec
    add app 
      input is list of apps
      invoke workflow possibly via policy
    remove app 
      input is list of apps
      invoke workflow possibly via policy

  workflow
    add app
      deploy app
      sync app
      config upf with mec fqdn ?how do we get upf id?

    remove app
      ?

  